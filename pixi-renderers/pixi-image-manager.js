var gdjs;(function(f){const u=new f.Logger("PIXI Image manager"),d=GlobalPIXIModule.PIXI,c=(a,e)=>{u.error("Unable to load file "+a+" with error:",e||"(unknown error)")},h=(a,e)=>{!a||e.smoothed||(a.baseTexture.scaleMode=d.SCALE_MODES.NEAREST)},I=(a,e,i)=>{for(let o=0,t=a.length;o<t;++o){const r=a[o];if(r.name===e&&r.kind===i)return r}return null};class p{constructor(e){this._resources=e,this._invalidTexture=d.Texture.from("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAFElEQVQoU2P8z/D/PwMewDgyFAAApMMX8Zi0uXAAAAAASUVORK5CYIIA"),this._loadedTextures=new Hashtable}setResources(e){this._resources=e}getPIXITexture(e){if(this._loadedTextures.containsKey(e)){const r=this._loadedTextures.get(e);if(r.valid)return r;u.error("Texture for "+e+" is not valid anymore (or never was).")}if(e==="")return this._invalidTexture;const i=I(this._resources,e,"image");if(!i)return u.warn('Unable to find texture for resource "'+e+'".'),this._invalidTexture;u.log('Loading texture for resource "'+e+'"...');const o=i.file,t=d.Texture.from(o).on("error",r=>{c(o,r)});return h(t,i),this._loadedTextures.put(e,t),t}getPIXIVideoTexture(e){if(this._loadedTextures.containsKey(e))return this._loadedTextures.get(e);if(e==="")return this._invalidTexture;const i=I(this._resources,e,"video");if(!i)return u.warn('Unable to find video texture for resource "'+e+'".'),this._invalidTexture;const o=i.file;u.log('Loading video texture for resource "'+e+'"...');const t=d.Texture.from(o).on("error",r=>{c(o,r)});return this._loadedTextures.put(e,t),t}getInvalidPIXITexture(){return this._invalidTexture}loadTextures(e,i){const o=this._resources,t={};for(let s=0,l=o.length;s<l;++s){const n=o[s];if(n.file&&n.kind==="image"){if(this._loadedTextures.containsKey(n.name))continue;t[n.file]=t[n.file]?t[n.file].concat(n):[n]}}const r=Object.keys(t).length;if(r===0)return i(r);const g=d.Loader.shared;let A=0;const _=g.onProgress.add(function(){A++,e(A,r)});for(const s in t)t.hasOwnProperty(s)&&g.add(s,s);g.load((s,l)=>{s.onProgress.detach(_);for(const n in l)if(l.hasOwnProperty(n)){if(!t.hasOwnProperty(n))continue;t[n].forEach(T=>{const x=l[n].texture;if(!x){const P=l[n].error;c(n,P);return}this._loadedTextures.put(T.name,x),h(x,T)})}i(r)})}}f.PixiImageManager=p,f.ImageManager=f.PixiImageManager})(gdjs||(gdjs={}));
//# sourceMappingURL=pixi-image-manager.js.map
